<html xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
       xmlns:p="http://primefaces.org/ui">
<h:head></h:head>

<h:body>
<p:layout fullPage="true">  
  
    <p:layoutUnit position="north" size="110" resizable="false" closable="false" collapsible="false">    
        <Center><h2>SISTEMA WEB DE ASISTENCIA TECNICA</h2></Center><!--  <H3>Bienvenido</H3>  -->
    </p:layoutUnit>    
  
    <p:layoutUnit position="west" size="200" header="Solicitudes" collapsible="true"> 
            <br/> 
            
                   <center>
            <p:panelGrid columns="1" cellpadding="1">  
                    <p:commandButton Id="Generar" value="Generar" action="#{solicitudBean.cambiarPagGen}" />
                    <p:commandButton Id="Historial" value="Historial" action="#{solicitudBean.cambiarPagVis}" />                                            
                </p:panelGrid> 
                </center>  
    </p:layoutUnit>    
    <p:layoutUnit position="center">
              
      <h:form id="form">
              <p:growl id="growl" showDetail="true"/>
              <p:tabView id="tabview" dinamic="true">
              <p:ajax event="tabChange" listener="#{evaluacionBean.onTabChange}"/>
				<p:tab title="Atendidos">
					<p:contextMenu for="dataAtencion">
						<p:menuitem value="Calificar" update=":form:growl :form:displayc" icon="ui-icon-search" actionListener="#{evaluacionBean.validaSolAten}" oncomplete="calificarDialog.show()"/>        				  
    				</p:contextMenu>
					
					<p:dataTable id="dataAtencion" var="Solicitudes" value="#{evaluacionBean.mediumSolsModelFin}"									
								selection="#{evaluacionBean.selectedSol}" selectionMode="single">
						<p:ajax event="rowSelect" listener="#{evaluacionBean.onRowSelect}"/>       
				        <p:column headerText="ID" align="center">  
				            <h:outputText value="#{Solicitudes.idSolicitud}" />  
				        </p:column>  
				        <p:column headerText="Descripcion" align="center">  
				            <h:outputText value="#{Solicitudes.descSolicitud}" />  
				        </p:column>  
				  
				        <p:column headerText="Fecha de Ingreso" align="center">  
				            <h:outputText value="#{Solicitudes.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>    
				        </p:column>  
				  
				        <p:column headerText="Hora de Ingreso">  
				            <h:outputText value="#{Solicitudes.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				        </p:column>
				        
				        <p:column style="width:4%">
			                <p:commandButton id="selectButton3"  oncomplete="solDialog.show()" icon="ui-icon-search" title="Ver">
			                	<f:setPropertyActionListener value="#{Solicitudes}" target="#{tableBean.selectedSol}" />
			            	</p:commandButton>
			        	</p:column>  
				    </p:dataTable>						
				
				</p:tab>
				
				<p:tab title="No Atendidos">														  
					<p:dataTable id="dataProceso" var="Solicitudes" value="#{evaluacionBean.mediumSolsProPend}"									
								selection="#{tableBean.selectedSol}" selectionMode="single">
						<p:ajax event="rowSelect" listener="#{tableBean.onRowSelect}"/>  
				        <p:column headerText="ID" align="center">  
				            <h:outputText value="#{Solicitudes.idSolicitud}" />  
				        </p:column>  
				        <p:column headerText="Descripcion" align="center">  
				            <h:outputText value="#{Solicitudes.descSolicitud}" />  
				        </p:column>				  
				        <p:column headerText="Fecha de Ingreso" align="center">  
				            <h:outputText value="#{Solicitudes.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>    
				        </p:column>				  
				        <p:column headerText="Hora de Ingreso">  
				            <h:outputText value="#{Solicitudes.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				        </p:column>
						<p:column headerText="Estado">  
				            <h:outputText value="#{Solicitudes.idEstado.nombreEstado}" />
				        </p:column>
						<p:column style="width:4%">
			                <p:commandButton id="selectButton3"  oncomplete="solDialog.show()" icon="ui-icon-search" title="Ver">
			                	<f:setPropertyActionListener value="#{Solicitudes}" target="#{tableBean.selectedSol}" />
			            	</p:commandButton>
			        	</p:column>
				    </p:dataTable>		     					
				</p:tab>
				
			</p:tabView>       
                   
            <p:dialog id="solDialog" header="Solicitud Detalle" widgetVar="solDialog" modal="false" resizable="false"  
	                showEffect="fade" hideEffect="explode">  
	  
				        <h:panelGrid id="display" columns="2" cellpadding="4">  
				  
				            <h:outputText value="Id:" />  
				            <h:outputText value="#{tableBean.selectedSol.idSolicitud}" />  
				  
				  			<h:outputText value="Cliente:" />  
				            <h:outputText value="#{tableBean.selectedSol.cliente.clientePK.idCliente}" />
				  
				  			<h:outputText value="Trabajador:" />  
				            <h:outputText value="#{tableBean.trbAten}" />
				            				
				  			<h:outputText value="Categoria:" />  
				            <h:outputText value="#{tableBean.selectedSol.idCategoria.nombreCategoria}" />
				                      
				            <h:outputText value="Descripcion:" />  
				            <h:outputText value="#{tableBean.selectedSol.descSolicitud}" />
				            
				            <h:outputText value="Tipo:" />  
				            <h:outputText value="#{tableBean.selectedSol.idTipo.nombreTipo}" /> 
				            
				            <h:outputText value="Prioridad:" />  
				            <h:outputText value="#{tableBean.selectedSol.idPrioridad.nombrePrioridad}" />
				            
				            <h:outputText value="Estado:" />  
				            <h:outputText value="#{tableBean.selectedSol.idEstado.nombreEstado}" />  
				  
				  			<h:outputText value="Ubicacion:" />  
				            <h:outputText value="#{tableBean.selectedSol.ubicacion}" />
				            
				            <h:outputText value="Fecha Ingreso:" />  
				            <h:outputText value="#{tableBean.selectedSol.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>  
				  
				            <h:outputText value="Hora Ingreso:" />  
				            <h:outputText value="#{tableBean.selectedSol.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				            
				            <h:outputText value="Fecha Cierre:" />  
				            <h:outputText value="#{tableBean.fcierre}"/>
				            
				            <h:outputText value="Hora Cierre:" />  
				            <h:outputText value="#{tableBean.hcierre}"/>
				        </h:panelGrid>  
			</p:dialog>
                        
            <p:dialog id="calificarDialog" header="Calificar Atencion" widgetVar="calificarDialog" showEffect="fade"  modal="false">
		
				<h:panelGrid id="displayc" columns="2" border="0" cellpadding="0" cellspacing="3">
					<h:panelGrid columns="2" cellpadding="1">
						<h:outputText value="Solicitud:" />  
				    	<h:outputText value="#{evaluacionBean.idFija}" />
					</h:panelGrid>
					<h:outputText value=""/>
					<p:selectOneRadio id="grid" value="#{evaluacionBean.calificacion}" layout="pageDirection" >  
			            <f:selectItems value="#{evaluacionBean.calificaciones}"/>  
			        </p:selectOneRadio>  					
					<p:panelGrid columns="1" cellpadding="1">
							<f:facet name="header">  
								Observacion 
							</f:facet> 
  							<p:inputTextarea id="observacion" rows="4" cols="103" value="#{evaluacionBean.observacion}" />
  							
  					</p:panelGrid> 	  					
				</h:panelGrid>	
				<center><p:commandButton id="Listo2" value="Listo" actionListener="#{evaluacionBean.grabar}" oncomplete="calificarDialog.hide();" update="growl"/></center>
			</p:dialog>            
              
     </h:form>  

  </p:layoutUnit>   
</p:layout>
</h:body> 
</html>