<html xmlns="http://www.w3c.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head></h:head>

<h:body>
<p:layout fullPage="true">  
  
    <p:layoutUnit position="north" size="110" resizable="false" closable="false" collapsible="false">    
        <Center><h2>SISTEMA WEB DE ASISTENCIA TECNICA</h2></Center><!--  <H3>Bienvenid@ Soportin@</H3>  -->
    </p:layoutUnit>    
  
    <p:layoutUnit position="west" size="200" header="Solicitudes" collapsible="true"> 
            <br/> 
            
                   <center>
            <p:panelGrid columns="1" cellpadding="1">
                                                             
                    <p:commandButton Id="Generar" value="Generar" action="#{solicitudBean.cambiarPagGenT}" />
                    <p:commandButton Id="Historial" value="Historial" action="#{solicitudBean.cambiarPagVisT}" />                                            
                </p:panelGrid> 
                </center>  
    </p:layoutUnit>    
    <p:layoutUnit position="center">
    	<h:form id="form">
    		<p:growl id="growl" showDetail="true"/>
               <p:tabView id="tabview" dinamic="true">
               <p:ajax event="tabChange" listener="#{tableBean.onTabChange}"/>
				<p:tab title="Pendientes">
					<p:contextMenu for="dataPendientes">
						<p:menuitem value="Atender" update="dataPendientes" icon="ui-icon-search" oncomplete="atenDialog.show()"/>        				  
    				</p:contextMenu>
					  
					<p:dataTable id="dataPendientes" var="Solicitud" value="#{tableBean.mediumSolsModel}" rowKey="#{Solicitud.idSolicitud}"
								 paginator="true" rows="10" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								 selection="#{tableBean.selectedSol}" selectionMode="single"	>
						<p:ajax event="rowSelect" listener="#{tableBean.onRowSelect}" update=":form:display :form:growl" oncomplete="solDialog.show()" />      				  
				        <p:column headerText="ID" align="center">  
				            <h:outputText value="#{Solicitud.idSolicitud}" />  
				        </p:column>  
				        <p:column headerText="Descripcion" align="center">  
				            <h:outputText value="#{Solicitud.descSolicitud}" />  
				        </p:column>				  
				        <p:column headerText="Fecha de Ingreso" align="center">  
				            <h:outputText value="#{Solicitud.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>    
				        </p:column>				  
				        <p:column headerText="Hora de Ingreso">  
				            <h:outputText value="#{Solicitud.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				        </p:column> 			  						
					</p:dataTable>					
				</p:tab>
					
				<p:tab title="En Proceso">				
					<p:contextMenu for="dataProceso">						        				  
        				<p:menuitem value="Diagnosticar" update="dataProceso" icon="ui-icon-close" oncomplete="diagnosticoDialog.show()"/> 
        				<p:menuitem value="Solucionar" update="datafinalizadas" icon="ui-icon-close" oncomplete="solucionDialog.show()"/>  
    				</p:contextMenu>									  
					<p:dataTable id="dataProceso" var="Solicitudes" value="#{tableBean.mediumSolsModelPro}"
								paginator="true" rows="7" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"	
								selection="#{tableBean.selectedSol}" selectionMode="single">
								<p:ajax event="rowSelect" listener="#{tableBean.onRowSelect}"/>  
				        <p:column headerText="ID" align="center">  
				            <h:outputText value="#{Solicitudes.idSolicitud}" />  
				        </p:column>  
				        <p:column headerText="Descripcion" align="center">  
				            <h:outputText value="#{Solicitudes.descSolicitud}" />  
				        </p:column>				  
				        <p:column headerText="Fecha de Ingreso" align="center">  
				            <h:outputText value="#{Solicitudes.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>    
				        </p:column>				  
				        <p:column headerText="Hora de Ingreso">  
				            <h:outputText value="#{Solicitudes.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				        </p:column>
				    </p:dataTable>		     					
				</p:tab>
				<p:tab title="Finalizado">					
					<p:dataTable id="datafinalizadas" var="Solicitudes" value="#{tableBean.mediumSolsModelFin}"
								paginator="true" rows="10" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"	
								selection="#{tableBean.selectedSol}" selectionMode="single">  
				        <p:column headerText="ID" align="center">  
				            <h:outputText value="#{Solicitudes.idSolicitud}" />  
				        </p:column>  
				        <p:column headerText="Descripcion" align="center">  
				            <h:outputText value="#{Solicitudes.descSolicitud}" />  
				        </p:column>  				  
				        <p:column headerText="Fecha de Ingreso" align="center">  
				            <h:outputText value="#{Solicitudes.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>    
				        </p:column>  
				  
				        <p:column headerText="Hora de Ingreso">  
				            <h:outputText value="#{Solicitudes.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				        </p:column>  
				    </p:dataTable>
						
				</p:tab>			
				
			</p:tabView>       
            <p:dialog id="solDialog" header="Solicitud Detalle" widgetVar="solDialog" resizable="false"  
	                showEffect="fade" hideEffect="explode">  
	  
				        <h:panelGrid id="display" columns="2" cellpadding="4">  
				  
				            <h:outputText value="Id:" />  
				            <h:outputText value="#{tableBean.selectedSol.idSolicitud}" />  
				  
				  			<h:outputText value="Cliente:" />  
				            <h:outputText value="#{tableBean.selectedSol.cliente.clientePK.idCliente}" />
				            
				            <h:outputText value="Descripcion:" />  
				            <h:outputText value="#{tableBean.selectedSol.descSolicitud}" />
				            
				            <h:outputText value="Tipo:" />  
				            <h:outputText value="#{tableBean.selectedSol.idTipo.nombreTipo}" /> 
				            
				            <h:outputText value="Estado:" />  
				            <h:outputText value="#{tableBean.selectedSol.idEstado.nombreEstado}" />  
				  
				            <h:outputText value="Fecha Ingreso:" />  
				            <h:outputText value="#{tableBean.selectedSol.fechaIngreso}" >
				            	<f:convertDateTime pattern="d/M/yyyy"/>
				            </h:outputText>  
				  
				            <h:outputText value="Hora Ingreso:" />  
				            <h:outputText value="#{tableBean.selectedSol.horaIngreso}" >
				            	<f:convertDateTime pattern="hh:mm a"/>
				            </h:outputText>  
				        </h:panelGrid>  
			</p:dialog>
			
			<p:dialog id="atencionDialog" header="Atencion" widgetVar="atencionDialog" resizable="false"  
	                showEffect="fade" hideEffect="explode">
				
				<p:panelGrid columns="2">  
			        <h:outputLabel for="prioridad" value="Prioridad: " />  
			        <p:selectOneMenu id="prioridad" value="#{tableBean.prioridad}">
			         	<f:selectItem itemLabel="Selecciona" itemValue="" />  
			            <f:selectItems value="#{tableBean.prinames}" />
			            <p:ajax listener="#{tableBean.handleChangeP}" />
			        </p:selectOneMenu>
			        
			        <h:outputLabel for="trabajador" value="Trabajador: " />  
			        <p:selectOneMenu id="trabajador" value="#{tableBean.trabajador}">
			        	<f:selectItem itemLabel="Selecciona" itemValue="" />   
			            <f:selectItems value="#{tableBean.traid}" />  
			        </p:selectOneMenu>
			        <f:facet name="footer">
			        	<p:commandButton id="Iniciar" value="Iniciar" actionListener="#{tableBean.asignarTecnico}" onComplete="atencionDialog.hide();"/> 
			        </f:facet> 
			    </p:panelGrid> 
			        
			    
			</p:dialog>
			
			<p:dialog id="diagnosticoDialog" header="Registrar Diagnostico" widgetVar="diagnosticoDialog" showEffect="fade"  modal="false">
		
				<p:panelGrid columns="2" border="0" cellpadding="0" cellspacing="0">
					<p:panelGrid columns="1" cellpadding="1">
  							<p:inputTextarea id="Diagnostico" rows="4" cols="103" value="#{tableBean.diagnostico}"/>
  							<p:commandButton id="Listo1" value="Listo" actionListener="#{tableBean.actualizarDiag}" oncomplete="diagnosticoDialog.hide();"/>
  						</p:panelGrid> 
					
				    <h:graphicImage id="Image1" url="/images/comunicaciones.jpg"></h:graphicImage>
					
				</p:panelGrid>						
					
			</p:dialog>
			<p:dialog id="solucionDialog" header="Registrar Solucion" widgetVar="solucionDialog" showEffect="fade"  modal="false">
		
				<p:panelGrid columns="2" border="0" cellpadding="0" cellspacing="0">
					<p:panelGrid columns="1" cellpadding="1">
  							<p:inputTextarea id="Solucion" rows="4" cols="103" value="#{tableBean.solucion}"/>
  							<p:commandButton id="Listo2" value="Listo" actionListener="#{tableBean.actualizarSol}" oncomplete="solucionDialog.hide();"/>
  						</p:panelGrid> 
					
				    <h:graphicImage id="Image2" url="/images/comunicaciones.jpg"></h:graphicImage>
					
				</p:panelGrid>						
					
			</p:dialog>
			
			<p:dialog id="atenDialog" header="Registrar Solucion" widgetVar="atenDialog" showEffect="fade"  modal="false">
		
				<p:panelGrid columns="2" border="0" cellpadding="0" cellspacing="0">
					<h:outputLabel for="prioridad1" value="Prioridad: " />  
			        <p:selectOneMenu id="prioridad1" value="#{tableBean.prioridad}">
			         	<f:selectItem itemLabel="Selecciona" itemValue="" />  
			            <f:selectItems value="#{tableBean.prinames}" />
			            <p:ajax listener="#{tableBean.handleChangeP}" />
			        </p:selectOneMenu>
			        
			        <h:outputLabel for="trabajador1" value="Trabajador: " />  
			        <p:selectOneMenu id="trabajador1" value="#{tableBean.trabajador}">
			        	<f:selectItem itemLabel="Selecciona" itemValue="" />   
			            <f:selectItems value="#{tableBean.traid}" />  
			        </p:selectOneMenu>
			        
					<p:commandButton id="Init" value="Listo" actionListener="#{tableBean.asignarTecnico}" oncomplete="atenDialog.hide();"/>
					
				</p:panelGrid>	
				
			</p:dialog>
			
     </h:form>
    </p:layoutUnit>   
</p:layout>
</h:body> 
</html>